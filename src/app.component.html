<div class="flex h-screen overflow-hidden bg-gray-50 dark:bg-dark-900 transition-colors duration-300 font-sans">
  
  <!-- Sidebar -->
  <aside class="hidden md:flex flex-col w-64 bg-white dark:bg-dark-800 border-r border-gray-200 dark:border-gray-700">
    <div class="p-6 flex items-center gap-3">
      <div class="w-9 h-9 bg-gradient-to-br from-brand-500 to-emerald-700 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-brand-500/20">G</div>
      <span class="text-lg font-bold tracking-tight text-gray-900 dark:text-white">Gestão Pessoal</span>
    </div>

    <nav class="flex-1 px-4 space-y-1">
      <a routerLink="/dashboard" routerLinkActive="bg-brand-50 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400" class="flex items-center gap-3 px-3 py-2.5 text-sm font-medium rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition">
        <span class="material-symbols-rounded">dashboard</span>
        {{ store.dict().menu.dashboard }}
      </a>
      <a routerLink="/transactions" routerLinkActive="bg-brand-50 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400" class="flex items-center gap-3 px-3 py-2.5 text-sm font-medium rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition">
        <span class="material-symbols-rounded">receipt_long</span>
        {{ store.dict().menu.transactions }}
      </a>
      <a routerLink="/calendar" routerLinkActive="bg-brand-50 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400" class="flex items-center gap-3 px-3 py-2.5 text-sm font-medium rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition">
        <span class="material-symbols-rounded">calendar_month</span>
        {{ store.dict().menu.calendar }}
      </a>
      <a routerLink="/analytics" routerLinkActive="bg-brand-50 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400" class="flex items-center gap-3 px-3 py-2.5 text-sm font-medium rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition">
        <span class="material-symbols-rounded">pie_chart</span>
        {{ store.dict().menu.reports }}
      </a>
      <a routerLink="/advisor" routerLinkActive="bg-brand-50 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400" class="flex items-center gap-3 px-3 py-2.5 text-sm font-medium rounded-xl text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition">
        <span class="material-symbols-rounded">psychology</span>
        {{ store.dict().menu.advisor }}
      </a>
    </nav>

    <div class="p-4 border-t border-gray-200 dark:border-gray-700 space-y-2">
       <!-- Language Selector -->
      <div class="grid grid-cols-5 gap-1 mb-2">
        <button (click)="store.setLanguage('pt')" [class.ring-2]="store.language() === 'pt'" class="w-8 h-6 text-[10px] font-bold bg-green-100 text-green-800 rounded flex items-center justify-center ring-brand-500">PT</button>
        <button (click)="store.setLanguage('en')" [class.ring-2]="store.language() === 'en'" class="w-8 h-6 text-[10px] font-bold bg-blue-100 text-blue-800 rounded flex items-center justify-center ring-brand-500">EN</button>
        <button (click)="store.setLanguage('es')" [class.ring-2]="store.language() === 'es'" class="w-8 h-6 text-[10px] font-bold bg-yellow-100 text-yellow-800 rounded flex items-center justify-center ring-brand-500">ES</button>
        <button (click)="store.setLanguage('fr')" [class.ring-2]="store.language() === 'fr'" class="w-8 h-6 text-[10px] font-bold bg-purple-100 text-purple-800 rounded flex items-center justify-center ring-brand-500">FR</button>
        <button (click)="store.setLanguage('de')" [class.ring-2]="store.language() === 'de'" class="w-8 h-6 text-[10px] font-bold bg-gray-200 text-gray-800 rounded flex items-center justify-center ring-brand-500">DE</button>
      </div>

      <!-- Theme Toggle -->
      <button (click)="store.toggleTheme()" class="flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-lg text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 w-full transition">
        <span class="material-symbols-rounded">{{ store.darkMode() ? 'light_mode' : 'dark_mode' }}</span>
        {{ store.darkMode() ? store.dict().menu.theme.light : store.dict().menu.theme.dark }}
      </button>
      
      <div class="mt-4 flex items-center gap-3 px-3 pt-2 border-t border-gray-100 dark:border-gray-700">
        <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-brand-400 to-blue-500 ring-2 ring-white dark:ring-dark-800"></div>
        <div class="flex-1 overflow-hidden">
          <p class="text-sm font-medium text-gray-900 dark:text-white truncate">Jean Dupont</p>
          <p class="text-xs text-gray-500 truncate">Premium</p>
        </div>
      </div>
    </div>
  </aside>

  <!-- Mobile Header -->
  <div class="md:hidden fixed top-0 left-0 right-0 h-16 bg-white dark:bg-dark-800 border-b border-gray-200 dark:border-gray-700 z-50 flex items-center justify-between px-4">
    <div class="flex items-center gap-2">
      <div class="w-8 h-8 bg-brand-600 rounded-lg flex items-center justify-center text-white font-bold">G</div>
      <span class="text-lg font-bold tracking-tight text-gray-900 dark:text-white">Gestão Pessoal</span>
    </div>
    <button (click)="isMobileMenuOpen.set(!isMobileMenuOpen())" class="p-2 text-gray-600 dark:text-gray-300">
      <span class="material-symbols-rounded">menu</span>
    </button>
  </div>

  <!-- Mobile Menu Overlay -->
  @if (isMobileMenuOpen()) {
    <div class="fixed inset-0 z-40 bg-black/50 md:hidden" (click)="isMobileMenuOpen.set(false)"></div>
    <div class="fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-dark-800 shadow-xl transform transition-transform md:hidden flex flex-col">
       <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
         <span class="font-bold text-lg dark:text-white">Menu</span>
         <button (click)="isMobileMenuOpen.set(false)" class="text-gray-500"><span class="material-symbols-rounded">close</span></button>
       </div>
       <nav class="flex-1 p-4 space-y-2">
          <a routerLink="/dashboard" (click)="isMobileMenuOpen.set(false)" class="flex items-center gap-3 px-3 py-3 text-sm font-medium rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white">
            <span class="material-symbols-rounded">dashboard</span> {{ store.dict().menu.dashboard }}
          </a>
          <a routerLink="/transactions" (click)="isMobileMenuOpen.set(false)" class="flex items-center gap-3 px-3 py-3 text-sm font-medium rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-rounded">receipt_long</span> {{ store.dict().menu.transactions }}
          </a>
          <a routerLink="/calendar" (click)="isMobileMenuOpen.set(false)" class="flex items-center gap-3 px-3 py-3 text-sm font-medium rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-rounded">calendar_month</span> {{ store.dict().menu.calendar }}
          </a>
          <a routerLink="/analytics" (click)="isMobileMenuOpen.set(false)" class="flex items-center gap-3 px-3 py-3 text-sm font-medium rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-rounded">pie_chart</span> {{ store.dict().menu.reports }}
          </a>
          <a routerLink="/advisor" (click)="isMobileMenuOpen.set(false)" class="flex items-center gap-3 px-3 py-3 text-sm font-medium rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300">
            <span class="material-symbols-rounded">psychology</span> {{ store.dict().menu.advisor }}
          </a>
       </nav>
       <div class="p-4 border-t border-gray-200 dark:border-gray-700">
          <div class="flex gap-2 justify-center mb-4">
             <button (click)="store.setLanguage('pt')" class="text-xs bg-gray-100 dark:bg-gray-700 p-2 rounded">PT</button>
             <button (click)="store.setLanguage('en')" class="text-xs bg-gray-100 dark:bg-gray-700 p-2 rounded">EN</button>
          </div>
       </div>
    </div>
  }

  <!-- Main Content -->
  <main class="flex-1 overflow-auto w-full pt-16 md:pt-0">
    <div class="max-w-7xl mx-auto p-4 md:p-8 pb-20">
      <router-outlet></router-outlet>
    </div>
  </main>

  <!-- Modal -->
  <app-add-transaction-modal></app-add-transaction-modal>
</div>